/**
 * @file Core0.c
 * @generated by CPrinter
 * @date Thu Aug 01 17:59:11 CEST 2019
 *
 * Code generated for processing element Core0 (ID=0).
 */

#include "preesm_gen.h"
// Core Global Declaration
extern pthread_barrier_t iter_barrier;
extern int stopThreads;

// Core Global Definitions
char Shared[64001284]; //  size:= 64001284*char
char *const read_parameters__kmeansClust__0 = (char*) (Shared+0);  // read_parameters > kmeansCluster size:= 63505152*char
char *const kmeansCluster__write_results__0 = (char*) (Shared+63505152);  // kmeansCluster > write_results size:= 496132*char
float *const image__image__0 = (float*) (Shared+0);  // read_parameters_image > kmeansCluster_image size:= 15876224*float
parameters *const par__par__0 = (parameters*) (Shared+63504896);  // read_parameters_par > kmeansCluster_par size:= 16*parameters
int *const assignedCluster__assignedClu__0 = (int*) (Shared+63505152);  // kmeansCluster_assignedCluster > write_results_assignedCluster size:= 124033*int

void *computationThread_Core0(void *arg){
	if (arg != NULL) {
		printf("Warning: expecting NULL arguments\n");
	}
	// Begin the execution loop
#ifdef LOOP_SIZE // Case of a finite loop
	int index;
	for(index=0;index<LOOP_SIZE;index++){
#else // Default case of an infinite loop
	while(1){
#endif
		pthread_barrier_wait(&iter_barrier);
		if(stopThreads){
			pthread_exit(NULL);
		}
		readParAndImg(329/*rows*/,377/*columns*/,128/*bands*/,124033/*pixels*/,image__image__0,par__par__0); // read_parameters
		kmeansfunction(329/*rows*/,377/*columns*/,128/*bands*/,124033/*pixels*/,image__image__0,par__par__0,assignedCluster__assignedClu__0); // kmeansCluster
		writeResults(329/*rows*/,377/*columns*/,assignedCluster__assignedClu__0); // write_results
	}
	return NULL;
}

