/**
 * @file Core0.c
 * @generated by CPrinter
 * @date Fri Jul 26 15:59:14 CEST 2019
 *
 * Code generated for processing element Core0 (ID=0).
 */

#include "preesm_gen.h"
// Core Global Declaration
extern pthread_barrier_t iter_barrier;
extern int stopThreads;

// Core Global Definitions
char Shared[32461816]; //  size:= 32461816*char
char *const read_parameters__kmeansClust__0 = (char*) (Shared+0);  // read_parameters > kmeansCluster size:= 32210176*char
char *const kmeansCluster__write_results__0 = (char*) (Shared+32210176);  // kmeansCluster > write_results size:= 251640*char
float *const image__image__0 = (float*) (Shared+0);  // read_parameters_image > kmeansCluster_image size:= 8052480*float
parameters *const par__par__0 = (parameters*) (Shared+32209920);  // read_parameters_par > kmeansCluster_par size:= 16*parameters
int *const assignedCluster__assignedClu__0 = (int*) (Shared+32210176);  // kmeansCluster_assignedCluster > write_results_assignedCluster size:= 62910*int

void *computationThread_Core0(void *arg){
	if (arg != NULL) {
		printf("Warning: expecting NULL arguments\n");
	}
	// Begin the execution loop
#ifdef LOOP_SIZE // Case of a finite loop
	int index;
	for(index=0;index<LOOP_SIZE;index++){
#else // Default case of an infinite loop
	while(1){
#endif
		pthread_barrier_wait(&iter_barrier);
		if(stopThreads){
			pthread_exit(NULL);
		}
		readParAndImg(270/*rows*/,233/*columns*/,128/*bands*/,62910/*pixels*/,image__image__0,par__par__0); // read_parameters
		kmeansfunction(270/*rows*/,233/*columns*/,128/*bands*/,62910/*pixels*/,image__image__0,par__par__0,assignedCluster__assignedClu__0); // kmeansCluster
		writeResults(270/*rows*/,233/*columns*/,assignedCluster__assignedClu__0); // write_results
	}
	return NULL;
}

